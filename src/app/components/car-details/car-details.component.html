<div *ngIf="showCar && car">
  <app-car-information name="{{car.name}}" image="{{car.image}}" description="{{car.description}}" shortDescription="{{car.shortDescription}}"></app-car-information>
  <div class="car-card-button-container">
    <button mat-raised-button class="car-card-button" (click)="onBookNow()" i18n="@@bookNow"> BOOK NOW </button>
  </div>
</div>

<div *ngIf="!showCar">
  <mat-horizontal-stepper [linear]="false" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel i18n="@@startTime">Start Time</ng-template>
        <mat-form-field>
          <input matInput [matDatepicker]="picker" [formControl]="startDateFormControl" [min]="minDate" [value]="startDate"
            placeholder="Start Date" (dateInput)="onChangeDate($event)" (dateChange)="onChangeDate($event.value)">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="dateInvalid" i18n="@@dateInvalidMsg"> Please enter a valid date</mat-error>
          <mat-error *ngIf="dateInThePast"i18n="@@dateInThePastMsg"> Please enter a date in the future</mat-error>
        </mat-form-field>
        <mat-form-field class="booking-start-time">
          <input matInput type="time" value="09:00" placeholder="Select Time" (change)="onChangeStartTime($event.target.value)" />
        </mat-form-field>
        <div>
          <button mat-button (click)="showCar = true" i18n="@@back">BACK</button>
          <button mat-button matStepperNext i18n="@@next">NEXT</button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup">
      <form [formGroup]="secondFormGroup">
        <ng-template matStepLabel i18n="@@duration">Duration</ng-template>
        <mat-form-field>
          <select matNativeControl required (change)="onChangeDuration($event.target.value)">
            <option *ngFor="let number of [1,2,3,4,5,6,7]" value="{{number}}">{{number}} <span i18n="@@days">days</span></option>
          </select>
        </mat-form-field>
        <div>
          <button mat-button matStepperPrevious i18n="@@back">BACK</button>
          <button mat-button matStepperNext i18n="@@next">NEXT</button>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel i18n="@@confirm">Confirm</ng-template>
      <div>
        <h3 i18n="@@bookingConfirmationHeader">Your Booking:</h3>
        <p>
          <span i18n="@@startDate">Start:</span> {{startDate| date: 'MM/dd/yyyy HH:mm'}}
        </p>
        <p>
          <span i18n="@@endDate">End:</span> {{endDate | date: 'MM/dd/yyyy HH:mm'}}
        </p>
        <p>
          <span i18n="@@duration">Duration:</span> {{duration}} <span i18n="@@days">days</span>
        </p>
      </div>
      <div>
        <button mat-button matStepperPrevious i18n="@@back">BACK</button>
        <button mat-button (click)="onConfirmBooking()" i18n="@@confirm">CONFIRM</button>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</div>
